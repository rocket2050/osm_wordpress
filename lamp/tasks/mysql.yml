---
#- name: Set MySQL root password before installing
#  debconf: name='mysql-server' question='mysql-server/root_password' value='{{mysql_root_pass | quote}}' vtype='password'

#- name: Confirm MySQL root password before installing
#  debconf: name='mysql-server' question='mysql-server/root_password_again' value='{{mysql_root_pass | quote}}' vtype='password'

- name: Installing Mysql in Ubuntu
  apt:
    name: "{{ item }}"
    state: latest
    update_cache: yes
  with_items: 
    - mysql-client
    - python-mysqldb
    - php-mysql
    - mysql-server
  when: ansible_os_family == 'Debian'
  notify:
    - mysql start

- name: Mysql Secure Installation
  include: mysql_secure_installation.yml

- name: create database for worldpress
  mysql_db:
    name: "{{ dbname }}"
    state: present

- name: create worldpress user
  mysql_user:
    name: wordpress
    password: "{{ dbuserpassword }}"
    priv: '{{dbname}}.*:ALL'
    state: present
  
